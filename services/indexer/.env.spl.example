# Cloak Indexer Service - SPL Token Configuration Example
#
# This is an example configuration for running the Cloak indexer with SPL token support.
# Copy this to .env and customize for your deployment.

# =============================================================================
# NETWORK CONFIGURATION
# =============================================================================

# Solana RPC endpoint
SOLANA_RPC_URL=https://api.devnet.solana.com

# =============================================================================
# SPL TOKEN CONFIGURATION
# =============================================================================

# Token mint address
# - Leave empty for native SOL: MINT_ADDRESS=
# - Set to mint pubkey for SPL tokens
# - MUST match the relay service configuration
#
# Common devnet mints:
# - USDC: EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v
# - USDT: Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB
MINT_ADDRESS=EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v

# =============================================================================
# SHIELD POOL PROGRAM
# =============================================================================

# Cloak shield-pool program ID (must match relay configuration)
CLOAK_PROGRAM_ID=your_program_id_here

# =============================================================================
# ADMIN CONFIGURATION
# =============================================================================

# Admin keypair for pushing roots to on-chain (JSON array format)
# Generate: solana-keygen new -o keypair.json --no-bip39-passphrase
# Then: cat keypair.json
ADMIN_KEYPAIR=[66,197,...]

# OR use file path (alternative to ADMIN_KEYPAIR)
# ADMIN_KEYPAIR_PATH=/path/to/keypair.json

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL connection string
DATABASE_URL=postgres://cloak:password@localhost:5432/cloak_indexer

# Database connection pool settings
DB_MAX_CONNECTIONS=20
DB_MIN_CONNECTIONS=2

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================

# HTTP server settings
PORT=3001
NODE_ENV=development
LOG_LEVEL=info
REQUEST_TIMEOUT_SECONDS=30

# CORS settings (comma-separated list of allowed origins)
# Use "*" for development, specific domains for production
CORS_ORIGINS=*

# =============================================================================
# MERKLE TREE CONFIGURATION
# =============================================================================

# Merkle tree height (default: 32 for ~4.3 billion leaves)
TREE_HEIGHT=32

# Zero value for empty tree nodes (32 bytes hex)
TREE_ZERO_VALUE=0000000000000000000000000000000000000000000000000000000000000000

# =============================================================================
# PROVER CONFIGURATION
# =============================================================================

# Artifacts directory containing SP1 prover files
ARTIFACTS_BASE_PATH=./artifacts

# SP1 version
SP1_VERSION=v2.0.0

# =============================================================================
# SP1 TEE CONFIGURATION (Optional)
# =============================================================================

# Enable SP1 TEE prover (hardware-based proving)
SP1_TEE_ENABLED=false

# SP1 TEE settings (only needed if SP1_TEE_ENABLED=true)
# SP1_TEE_WALLET_ADDRESS=
# SP1_TEE_RPC_URL=https://rpc.sp1-lumiere.xyz
# SP1_TEE_TIMEOUT_SECONDS=300
# NETWORK_PRIVATE_KEY=

# =============================================================================
# EXAMPLE CONFIGURATIONS
# =============================================================================

## Example 1: Native SOL Pool (Default)
# MINT_ADDRESS=
# CLOAK_PROGRAM_ID=c1oak...
# DATABASE_URL=postgres://cloak:password@localhost:5432/cloak_sol

## Example 2: USDC Pool on Devnet
# MINT_ADDRESS=EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v
# CLOAK_PROGRAM_ID=c1oak...
# SOLANA_RPC_URL=https://api.devnet.solana.com
# DATABASE_URL=postgres://cloak:password@localhost:5432/cloak_usdc_devnet

## Example 3: Custom Token on Mainnet
# MINT_ADDRESS=YourCustomMint111111111111111111111111111
# CLOAK_PROGRAM_ID=c1oak...
# SOLANA_RPC_URL=https://api.mainnet-beta.solana.com
# NODE_ENV=production
# LOG_LEVEL=warn
# CORS_ORIGINS=https://app.cloak.network,https://cloak.network
# DATABASE_URL=postgres://cloak:password@prod-db:5432/cloak_custom_mainnet
